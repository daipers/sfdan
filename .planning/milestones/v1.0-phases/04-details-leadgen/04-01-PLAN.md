---
phase: "04-details-leadgen"
plan: "01"
type: "execute"
wave: 1
depends_on: []
files_modified:
  - "src/app/projects/[id]/page.tsx"
  - "src/components/ProjectScoreBreakdown.tsx"
  - "src/components/ProjectTimeline.tsx"
  - "src/components/AwardCard.tsx"
  - "src/lib/projects.ts"
autonomous: true
user_setup: []
must_haves:
  truths:
    - "Each project has a dedicated detail page accessible via URL"
    - "Detail pages display full procedural compliance score breakdown"
    - "Detail pages show project timeline with key procedural dates"
    - "Detail pages link to source data on USASpending.gov"
    - "Users can navigate from dashboard to project details"
  artifacts:
    - path: "src/app/projects/[id]/page.tsx"
      provides: "Project detail page with score and timeline"
      exports: "Page component with award data"
    - path: "src/components/ProjectScoreBreakdown.tsx"
      provides: "Score component visualization"
      exports: "ScoreBreakdown component"
    - path: "src/components/ProjectTimeline.tsx"
      provides: "Timeline visualization"
      exports: "ProjectTimeline component"
  key_links:
    - from: "src/components/DataTable.tsx"
      to: "src/app/projects/[id]/page.tsx"
      via: "Link component on award row"
      pattern: "href.*projects.*id"
    - from: "src/app/projects/[id]/page.tsx"
      to: "USASpending.gov"
      via: "external link"
      pattern: "usaspending.gov.*award"
---

<objective>
Create project detail pages with full score breakdown, timeline visualization, and links to source data.

Purpose: Users need to drill down from the dashboard to see detailed procedural compliance information for each project.
Output: Working project detail pages at /projects/[id]
</objective>

<execution_context>
@./.planning/phases/03-dashboard-search/03-03-SUMMARY.md
@./.planning/ROADMAP.md
</execution_context>

<context>
@./.planning/PROJECT.md
@./src/components/AwardCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create project detail page route</name>
  <files>src/app/projects/[id]/page.tsx</files>
  <action>
    Create Next.js App Router page at src/app/projects/[id]/page.tsx:
    - Accept award_id from URL params
    - Fetch award data from /api/projects (existing searchProjects function)
    - Display award header with name, agency, amount, recipient
    - Show score badge (reuse AwardCard scoring display)
    - Include link to USASpending.gov award detail: https://www.usaspending.gov/award/{award_id}
    - Handle loading and error states
    - Use existing layout and styling patterns from dashboard
  </action>
  <verify>
    npm run build && curl -s http://localhost:3000/projects/ASST_NON_12345 | grep -q "Project Details"
  </verify>
  <done>
    /projects/ASST_NON_12345 renders with award data, score, and USASpending link
  </done>
</task>

<task type="auto">
  <name>Task 2: Create ScoreBreakdown component</name>
  <files>src/components/ProjectScoreBreakdown.tsx</files>
  <action>
    Create ProjectScoreBreakdown component at src/components/ProjectScoreBreakdown.tsx:
    - Accept award object with scoring data
    - Display three score components: environmental review timing, competitive bidding, modification authorization
    - Show each component as progress bar with score (0-100) and weight percentage
    - Display total weighted score prominently
    - Use color coding: green ≥80, yellow ≥60, red <60
    - Include tooltips explaining each component criteria
    - Style consistently with existing dashboard cards
  </action>
  <verify>
    npx tsc --noEmit && ls src/components/ProjectScoreBreakdown.tsx
  </verify>
  <done>
    ScoreBreakdown displays all three components with visual progress bars
  </done>
</task>

<task type="auto">
  <name>Task 3: Create ProjectTimeline component</name>
  <files>src/components/ProjectTimeline.tsx</files>
  <action>
    Create ProjectTimeline component at src/components/ProjectTimeline.tsx:
    - Accept award object with potential period of performance dates
    - Display vertical timeline with key dates: start date, end date, last modified date
    - Show data as of date (when data was last refreshed)
    - Use vertical line with circular markers for each date
    - Include aria-labels for accessibility
    - Handle cases where dates are missing (show "N/A")
    - Style with Tailwind, matching dashboard aesthetic
  </action>
  <verify>
    npx tsc --noEmit && ls src/components/ProjectTimeline.tsx
  </verify>
  <done>
    ProjectTimeline renders with available date information
  </done>
</task>

<task type="auto">
  <name>Task 4: Add navigation from dashboard to details</name>
  <files>src/components/DataTable.tsx</files>
  <action>
    Update DataTable to add clickable rows linking to project details:
    - Wrap table row or add Link component on award name
    - Use Next.js Link to /projects/[award_id]
    - Add cursor-pointer and hover styles to indicate clickability
    - Preserve existing sorting and pagination functionality
    - Ensure accessibility (keyboard navigation, focus states)
  </action>
  <verify>
    npm run build && grep -q "href.*projects" src/components/DataTable.tsx
  </done>
  <done>
    Clicking on a project row navigates to its detail page
  </done>
</task>

</tasks>

<verification>
- [ ] Project detail page loads at /projects/[id]
- [ ] Score breakdown shows all three components with weights
- [ ] Timeline displays key dates
- [ ] USASpending.gov link opens in new tab
- [ ] Dashboard rows are clickable to detail pages
- [ ] TypeScript compiles without errors
- [ ] Build succeeds
</verification>

<success_criteria>
Each project has a dedicated detail page with:
- Full score breakdown (environmental, bidding, authorization components)
- Project timeline with key dates
- Link to source data on USASpending.gov
- Navigation from dashboard table
</success_criteria>

<output>
After completion, create `.planning/phases/04-details-leadgen/04-01-SUMMARY.md`
</output>
