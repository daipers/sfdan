---
phase: 08-8-functionality-expansion-we-are-going-to-make-sure-it-works-exactly-like-we-want-it-to-we-want-it-completely-functional
plan: 03
type: execute
wave: 2
depends_on: ["08-01", "08-02"]
files_modified:
  - src/components/AnalyticsTracker.tsx
  - src/app/page.tsx
  - src/components/DataTable.tsx
  - src/app/projects/[id]/page.tsx
  - src/app/content/page.tsx
  - src/app/content/[slug]/page.tsx
  - src/app/newsletter/page.tsx
  - src/app/gated-reports/page.tsx
  - src/components/LeadCaptureCard.tsx
  - src/components/EmailGateForm.tsx
  - src/components/NewsletterSignupForm.tsx
  - src/components/AssessmentWizard.tsx
autonomous: true
requirements: [HARD-02]

must_haves:
  truths:
    - "Priority journey steps emit analytics events"
    - "Lead capture and newsletter submissions emit analytics events"
  artifacts:
    - path: "src/components/AnalyticsTracker.tsx"
      provides: "Reusable page view analytics trigger"
    - path: "src/components/EmailGateForm.tsx"
      provides: "Lead capture event emission"
      contains: "trackEvent"
    - path: "src/components/NewsletterSignupForm.tsx"
      provides: "Newsletter signup event emission"
      contains: "trackEvent"
  key_links:
    - from: "src/components/AnalyticsTracker.tsx"
      to: "src/lib/analytics.ts"
      via: "trackEvent"
      pattern: "trackEvent"
    - from: "src/components/EmailGateForm.tsx"
      to: "/api/analytics"
      via: "trackEvent"
      pattern: "trackEvent"
    - from: "src/components/NewsletterSignupForm.tsx"
      to: "/api/analytics"
      via: "trackEvent"
      pattern: "trackEvent"
---

<objective>
Instrument analytics for the priority journeys and add regression coverage.

Purpose: Make journey completion measurable and prevent regressions.
Output: Event logging across flows and updated E2E tests.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/lib/analytics.ts
@src/app/page.tsx
@src/components/DataTable.tsx
@src/app/projects/[id]/page.tsx
@src/app/content/page.tsx
@src/app/content/[slug]/page.tsx
@src/app/newsletter/page.tsx
@src/app/gated-reports/page.tsx
@src/components/EmailGateForm.tsx
@src/components/NewsletterSignupForm.tsx
@src/components/AssessmentWizard.tsx
@tests/e2e.spec.ts
</context>

<tasks>

<task type="auto">
  <name>Add page-view analytics tracker and wire it to key pages</name>
  <files>src/components/AnalyticsTracker.tsx, src/app/page.tsx, src/app/projects/[id]/page.tsx, src/app/content/page.tsx, src/app/content/[slug]/page.tsx, src/app/newsletter/page.tsx, src/app/gated-reports/page.tsx</files>
  <action>
Create a client AnalyticsTracker component that calls trackEvent on mount with event_name, journey, step, and optional metadata (path, referrer). Use it in server-rendered pages (project detail, content list/detail, newsletter, gated reports). Add a HomePage useEffect event for explore view to avoid duplicate trackers on the client page.
  </action>
  <verify>rg "AnalyticsTracker" src/app/content/page.tsx</verify>
  <done>Page-view events are emitted for each priority journey route.</done>
</task>

<task type="auto">
  <name>Instrument journey actions and submissions</name>
  <files>src/components/DataTable.tsx, src/components/LeadCaptureCard.tsx, src/components/EmailGateForm.tsx, src/components/NewsletterSignupForm.tsx, src/components/AssessmentWizard.tsx</files>
  <action>
Emit trackEvent calls for key actions: DataTable row click (detail open), lead capture CTA click, EmailGateForm submission success, NewsletterSignupForm submission success, and AssessmentWizard results view/CTA click. Include journey and step metadata so events can be grouped by flow without collecting PII.
  </action>
  <verify>rg "trackEvent" src/components/EmailGateForm.tsx</verify>
  <done>Each journey step and submission emits a structured analytics event.</done>
</task>

</tasks>

<verification>
- `rg "AnalyticsTracker" src/app/content/page.tsx` confirms tracker wiring
- `rg "trackEvent" src/components/EmailGateForm.tsx` confirms action instrumentation
</verification>

<success_criteria>
- Analytics events fire for page views, CTA clicks, and lead/newsletter submissions
</success_criteria>

<output>
After completion, create `.planning/phases/08-8-functionality-expansion-we-are-going-to-make-sure-it-works-exactly-like-we-want-it-to-we-want-it-completely-functional/08-03-SUMMARY.md`
</output>
