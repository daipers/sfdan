---
phase: 10-fix-deployment-500-error
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Deployment Platform site loads without 500 errors"
    - "Instrumentation hook no longer crashes on startup"
  artifacts:
    - path: "src/instrumentation.ts"
      provides: "Disabled/removed to prevent startup crash"
  key_links: []
---

<objective>
Fix the Deployment Platform 500 error by disabling the instrumentation hook that crashes on startup.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/debug/deployment-internal-server-error.md
</context>

<tasks>

<task type="auto">
  <name>Disable instrumentation hook</name>
  <files>src/instrumentation.ts</files>
  <action>
Comment out or remove the assertServerConfig() call in the register() function. The instrumentation hook crashes Deployment Platform because it requires NEXT_PUBLIC_SITE_URL at runtime which may not be available. Replace the file content with a no-op that does nothing on startup.
  </action>
  <verify>
npm run build succeeds
</verify>
  <done>Instrumentation register() is now a no-op that won't crash on startup</done>
</task>

</tasks>

<verification>
Deploy to Deployment Platform and verify the site loads without 500 errors.
</verification>

<success_criteria>
- [ ] Site loads on Deployment Platform URL (no 500 error)
- [ ] Build succeeds locally
</success_criteria>

<output>
After completion, create `.planning/phases/10-fix-deployment-500-error/10-01-SUMMARY.md`
</output>
